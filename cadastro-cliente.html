<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Orçamento">
    <title>Cadastro de Cliente - Sistema de Orçamento</title>
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fas fa-user-plus"></i>
                <h1>Cadastro de Cliente</h1>
            </div>
        </header>

        <nav class="nav-menu">
            <a href="index.html" class="nav-item">
                <i class="fas fa-home"></i>
                <span>Início</span>
            </a>
            <a href="cadastro-cliente.html" class="nav-item active">
                <i class="fas fa-user-plus"></i>
                <span>Cadastrar Cliente</span>
            </a>
            <a href="orcamento.html" class="nav-item">
                <i class="fas fa-file-invoice-dollar"></i>
                <span>Novo Orçamento</span>
            </a>
            <a href="clientes.html" class="nav-item">
                <i class="fas fa-users"></i>
                <span>Clientes</span>
            </a>
            <a href="configuracoes.html" class="nav-item">
                <i class="fas fa-cog"></i>
                <span>Configurações</span>
            </a>
        </nav>

        <main class="main-content">
            <div class="form-container">
                <form id="formCliente" class="form-card">
                    <h2>Dados do Cliente</h2>
                    
                    <div class="form-group">
                        <label for="nome">
                            <i class="fas fa-user"></i> Nome Completo *
                        </label>
                        <input type="text" id="nome" name="nome" required placeholder="Digite o nome completo">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="telefone">
                                <i class="fas fa-phone"></i> Telefone/WhatsApp *
                            </label>
                            <input type="tel" id="telefone" name="telefone" required placeholder="(00) 00000-0000" maxlength="15">
                        </div>

                        <div class="form-group">
                            <label for="email">
                                <i class="fas fa-envelope"></i> E-mail
                            </label>
                            <input type="email" id="email" name="email" placeholder="email@exemplo.com">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="endereco">
                            <i class="fas fa-map-marker-alt"></i> Endereço Completo *
                        </label>
                        <input type="text" id="endereco" name="endereco" required placeholder="Rua, número, bairro, cidade - Estado">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="cidade">
                                <i class="fas fa-city"></i> Cidade *
                            </label>
                            <input type="text" id="cidade" name="cidade" required placeholder="Nome da cidade">
                        </div>

                        <div class="form-group">
                            <label for="estado">
                                <i class="fas fa-map"></i> Estado *
                            </label>
                            <input type="text" id="estado" name="estado" required placeholder="UF" maxlength="2">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="observacoes">
                            <i class="fas fa-sticky-note"></i> Observações
                        </label>
                        <textarea id="observacoes" name="observacoes" rows="3" placeholder="Observações adicionais sobre o cliente"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="window.location.href='index.html'">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Salvar Cliente
                        </button>
                    </div>
                </form>
            </div>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js"></script>
    <script>
        // Máscara de telefone
        document.getElementById('telefone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                if (value.length <= 10) {
                    value = value.replace(/(\d{2})(\d{4})(\d{0,4})/, '($1) $2-$3');
                } else {
                    value = value.replace(/(\d{2})(\d{5})(\d{0,4})/, '($1) $2-$3');
                }
                e.target.value = value;
            }
        });

        // Máscara de estado (UF)
        document.getElementById('estado').addEventListener('input', function(e) {
            e.target.value = e.target.value.toUpperCase();
        });

        // Salvar cliente
        document.getElementById('formCliente').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const cliente = {
                id: Date.now(),
                nome: document.getElementById('nome').value,
                telefone: document.getElementById('telefone').value,
                email: document.getElementById('email').value || '',
                endereco: document.getElementById('endereco').value,
                cidade: document.getElementById('cidade').value,
                estado: document.getElementById('estado').value,
                observacoes: document.getElementById('observacoes').value || '',
                dataCadastro: new Date().toLocaleDateString('pt-BR')
            };

            const clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
            clientes.push(cliente);
            localStorage.setItem('clientes', JSON.stringify(clientes));

            alert('Cliente cadastrado com sucesso!');
            document.getElementById('formCliente').reset();
            setTimeout(() => {
                window.location.href = 'clientes.html';
            }, 500);
        });

        // Registrar Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./sw.js')
                    .then((registration) => {
                        console.log('Service Worker registrado com sucesso:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('Falha ao registrar Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>

